#!/usr/bin/env ruby
require 'sinatra/base'
require 'bio-publisci'
require 'rack-flash'
require 'cgi'
require "sinatra/reloader"
require "sinatra/linkeddata"
require "sinatra/cross_origin"
require "sinatra/cross_origin"

class PubliSciServer < Sinatra::Base
  configure do
    enable :sessions
    enable :cross_origin
  end

  set :views, File.dirname(__FILE__) + '/../server/views'
  set :repository, RDF::Repository.new
  # set :repository, RDF::FourStore::Repository.new('http://localhost:8080')
  settings.repository.load(File.dirname(__FILE__) + '/../resources/primer.ttl')
  set :sudo_pass, nil

  use Rack::Flash

  require_relative '../server/helpers.rb'

  require_relative '../server/routes.rb'
  

  run! if app_file == $0
end